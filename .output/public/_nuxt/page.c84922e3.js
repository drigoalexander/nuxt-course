import{z as d,K as A,d as h,A as K,B as b,P as R,r as S,C as g,L as j,D as v,S as x,E as O,G as T,T as _,R as w,H as B,I as C}from"./entry.cc832dd7.js";const H=(e,n,t)=>(n=n===!0?{}:n,{default:()=>{var a;return n?d(e,n,t):(a=t.default)==null?void 0:a.call(t)}}),I=(e,n)=>n.path.replace(/(:\w+)\([^)]+\)/g,"$1").replace(/(:\w+)[?+*]/g,"$1").replace(/:\w+/g,t=>{var a;return((a=e.params[t.slice(1)])==null?void 0:a.toString())||""}),f=(e,n)=>{const t=e.route.matched.find(i=>{var o;return((o=i.components)==null?void 0:o.default)===e.Component.type}),a=n??(t==null?void 0:t.meta.key)??(t&&I(e.route,t));return typeof a=="function"?a(e.route):a},L=(e,n)=>({default:()=>e?d(A,e===!0?{}:e,n):n}),N=h({name:"RouteProvider",props:{vnode:{type:Object,required:!0},route:{type:Object,required:!0},vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const n=e.renderKey,t=e.route,a={};for(const i in e.route)Object.defineProperty(a,i,{get:()=>n===e.renderKey?e.route[i]:t[i]});return K(R,b(a)),()=>d(e.vnode,{ref:e.vnodeRef})}}),D=h({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(e,{attrs:n,expose:t}){const a=B(),i=S(),o=g(R,null);t({pageRef:i});const c=g(j,null);let u;const s=a.deferHydration();return()=>d(w,{name:e.name,route:e.route,...n},{default:r=>{const p=$(o,r.route,r.Component),m=o&&o.matched.length===r.route.matched.length;if(!r.Component){if(u&&!m)return u;s();return}if(u&&c&&!c.isCurrent(r.route))return u;if(p&&o&&(!c||c!=null&&c.isCurrent(o)))return m?u:null;const y=f(r,e.pageKey),l=!!(e.transition??r.route.meta.pageTransition??v),k=l&&F([e.transition,r.route.meta.pageTransition,v,{onAfterLeave:()=>{a.callHook("page:transition:finish",r.Component)}}].filter(Boolean));return u=H(_,l&&k,L(e.keepalive??r.route.meta.keepalive??T,d(x,{suspensible:!0,onPending:()=>a.callHook("page:start",r.Component),onResolve:()=>{O(()=>a.callHook("page:finish",r.Component).finally(s))}},{default:()=>d(N,{key:y,vnode:r.Component,route:r.route,renderKey:y,trackRootNodes:l,vnodeRef:i})}))).default(),u}})}});function q(e){return Array.isArray(e)?e:e?[e]:[]}function F(e){const n=e.map(t=>({...t,onAfterLeave:q(t.onAfterLeave)}));return C(...n)}function $(e,n,t){if(!e)return!1;const a=n.matched.findIndex(i=>{var o;return((o=i.components)==null?void 0:o.default)===(t==null?void 0:t.type)});return!a||a===-1?!1:n.matched.slice(0,a).some((i,o)=>{var c,u,s;return((c=i.components)==null?void 0:c.default)!==((s=(u=e.matched[o])==null?void 0:u.components)==null?void 0:s.default)})||t&&f({route:n,Component:t})!==f({route:e,Component:t})}export{D as default};
